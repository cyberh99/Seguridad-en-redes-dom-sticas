



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Análisis de las vulnerabilidades presentes en un entorno doméstico">
      
      
      
        <meta name="author" content="Héctor Romero <i72roloh@uco.es>">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>Preparando el arsenal - Seguridad en redes domésticas</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#preparando-el-arsenal" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Seguridad en redes domésticas" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Seguridad en redes domésticas
            </span>
            <span class="md-header-nav__topic">
              Preparando el arsenal
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Seguridad en redes domésticas" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Seguridad en redes domésticas
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Inicio" class="md-nav__link">
      Inicio
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../introduccion/" title="Introducción" class="md-nav__link">
      Introducción
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Preparando el arsenal
      </label>
    
    <a href="./" title="Preparando el arsenal" class="md-nav__link md-nav__link--active">
      Preparando el arsenal
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configurando-la-raspberry-pi-como-herramienta-de-hacking" title="Configurando la Raspberry  PI como herramienta de hacking" class="md-nav__link">
    Configurando la Raspberry  PI como herramienta de hacking
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-es-una-raspberry" title="¿Qué es una Raspberry?" class="md-nav__link">
    ¿Qué es una Raspberry?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuales-son-las-caracteristicas-que-tiene" title="¿Cuáles son las características que tiene?" class="md-nav__link">
    ¿Cuáles son las características que tiene?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#escogiendo-nuestro-sistema" title="Escogiendo nuestro sistema" class="md-nav__link">
    Escogiendo nuestro sistema
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion-de-kali-linux-usando-dd" title="Instalación de Kali Linux usando DD" class="md-nav__link">
    Instalación de Kali Linux usando DD
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creando-un-punto-de-acceso-propio" title="Creando un punto de Acceso propio" class="md-nav__link">
    Creando un punto de Acceso propio
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../informationGathering/" title="Recolección de información" class="md-nav__link">
      Recolección de información
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../vulnerabilities/" title="Analizando las redes Wifi" class="md-nav__link">
      Analizando las redes Wifi
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../crackingWifi/" title="Cracking de  redes Wifi" class="md-nav__link">
      Cracking de  redes Wifi
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../networkAttack/" title="Atacando la red interna" class="md-nav__link">
      Atacando la red interna
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../javascript/" title="POC: Inyectando Javascript Malicioso" class="md-nav__link">
      POC: Inyectando Javascript Malicioso
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configurando-la-raspberry-pi-como-herramienta-de-hacking" title="Configurando la Raspberry  PI como herramienta de hacking" class="md-nav__link">
    Configurando la Raspberry  PI como herramienta de hacking
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#que-es-una-raspberry" title="¿Qué es una Raspberry?" class="md-nav__link">
    ¿Qué es una Raspberry?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cuales-son-las-caracteristicas-que-tiene" title="¿Cuáles son las características que tiene?" class="md-nav__link">
    ¿Cuáles son las características que tiene?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#escogiendo-nuestro-sistema" title="Escogiendo nuestro sistema" class="md-nav__link">
    Escogiendo nuestro sistema
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion-de-kali-linux-usando-dd" title="Instalación de Kali Linux usando DD" class="md-nav__link">
    Instalación de Kali Linux usando DD
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creando-un-punto-de-acceso-propio" title="Creando un punto de Acceso propio" class="md-nav__link">
    Creando un punto de Acceso propio
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="preparando-el-arsenal">Preparando el arsenal<a class="headerlink" href="#preparando-el-arsenal" title="Permanent link">&para;</a></h1>
<h2 id="configurando-la-raspberry-pi-como-herramienta-de-hacking">Configurando la Raspberry  PI como herramienta de hacking<a class="headerlink" href="#configurando-la-raspberry-pi-como-herramienta-de-hacking" title="Permanent link">&para;</a></h2>
<h3 id="que-es-una-raspberry">¿Qué es una Raspberry?<a class="headerlink" href="#que-es-una-raspberry" title="Permanent link">&para;</a></h3>
<p>El proyecto <a href="https://www.raspberrypi.org/">Raspberry Pi</a> consiste en una serie de ordenadores cuyo principal objetivo era potenciar el aprendizaje en entornos educativos así como en paises en vias de desarrollo, sin embargo, gracias al potencial de estos equipos se utilizan para otros muchos fines como robótica o en nuestro caso pentesting.</p>
<h4 id="cuales-son-las-caracteristicas-que-tiene">¿Cuáles son las características que tiene?<a class="headerlink" href="#cuales-son-las-caracteristicas-que-tiene" title="Permanent link">&para;</a></h4>
<ul>
<li>Procesador a 1,2 GHz de 64 bits con cuatro núcleos ARMv8.</li>
<li>1GB de Memoria.</li>
<li>802.11n Wireless LAN.</li>
<li>Bluetooth 4.1.</li>
<li>
<p>Bluetooth Low Energy (BLE).</p>
</li>
<li>
<p>4 puertos USB.</p>
</li>
<li>40 pines GPIO.</li>
<li>Puerto Full HDMI.</li>
<li>Puerto Ethernet.</li>
<li>Conector combo compuesto de audio y vídeo de 3,5 mm.</li>
<li>Interfaz de la cámara (CSI).</li>
<li>Interfaz de pantalla (DSI).</li>
<li>Ranura para tarjetas microSD (ahora push-pull en lugar de push-push).</li>
<li>Núcleo de gráficos VideoCore IV 3D.</li>
<li>Dimensiones de placa de 8.5 por 5.3 cm.</li>
</ul>
<p>Como podemos ver nos ofrece una gran serie de posibilidades para un tamaño muy reducido, lo cual nos permitirá llevarlo pasando desapercibidos en cualquier mochila o incluso en libros.
<img alt="" src="../img/raspberryhidden.jpg" /></p>
<h2 id="escogiendo-nuestro-sistema">Escogiendo nuestro sistema<a class="headerlink" href="#escogiendo-nuestro-sistema" title="Permanent link">&para;</a></h2>
<p>Las raspberry tienen arquitectura ARM de forma que existen una serie de sistemas operativos diseñados especificamente para funcionar en estos dispositivos, entre los cuales podemos destacar <a href="https://www.raspbian.org/">Raspbian</a> por ser el sistema operativo oficial de Raspberry y <a href="https://www.offensive-security.com/kali-linux-arm-images/">Kali Linux</a> por ser la distribución más conocida para pentesting y la que estaremos usando.</p>
<p>Cuando hayamos escogido el sistema operativo para trabajar, el siguiente paso será montarlo dentro de la tarjeta SD. En entornos Linux la herramienta recomendada para ello es <a href="https://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html">dd</a> y en entornos Windows y Mac podemos optar por <a href="https://www.balena.io/etcher/">Etcher</a>.</p>
<h3 id="instalacion-de-kali-linux-usando-dd">Instalación de Kali Linux usando DD<a class="headerlink" href="#instalacion-de-kali-linux-usando-dd" title="Permanent link">&para;</a></h3>
<p>Cuando obtengamos la imagen de Kali Linux, tendremos que descomprimirla, generalmente viene comprimida con xz. Pasaremos a descompirmir la imagen usando:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ xz --decompress kali-linux-raspberrypi.img.xz
</pre></div>
</td></tr></table>

<p>Una vez descomprimida la imagen pasarémos a montarla dentro de la tarjeta SD para usarla posteriormente en la raspberry, para ello usaremos la herramienta dd:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ dd if=kali-linux-raspberrypi.img of=/dev/sdbX status=progress
</pre></div>
</td></tr></table>

<p>Una vez haya finalizado <em>dd</em> podremos iniciar la raspberry y comenzar con la configuración.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Como medida de seguridad es recomedable cambiar las credenciales por defecto <strong>root/toor</strong>, así como actualizar todo el sistema antes de empezar a trabajar con el mismo.</p>
</div>
<h2 id="creando-un-punto-de-acceso-propio">Creando un punto de Acceso propio<a class="headerlink" href="#creando-un-punto-de-acceso-propio" title="Permanent link">&para;</a></h2>
<p>Con el fin de utilizar la raspberry de forma remota y sin conexión a internet (puesto que no tenemos esta garantizada), pasaremos a crear un punto de acceso haciendo uso de una antena Wifi (en el caso del modelo raspberry pi 3 puede ser la interna).
Para facilitar el trabajo usaremos un script de configuración que nos automatiza la instalación de un servidor DHCP (dnsmasq) y Hostapd ambos necesarios para la correcta instalación y funcionamiento del punto de acceso.</p>
<p>Podemos encontrar el script en el <a href="https://github.com/cyberh99/raspberryAP">repositorio de Github</a></p>
<p>Con esto conseguimos tener acceso por SSH haciendo uso de nuestro móvil o ordenador independientemente de la conexión a internet. Puesto que estaremos trabajando posteriormente con redes wifi es recomendable tener 2 antenas independientes para realizar los ataques descritos en el laboratorio.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Es necesario configurar el sercicio SSH para ejecutarse al inicio, para ello usaremos el comando</p>
<p>sudo systemctl start ssh</p>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../introduccion/" title="Introducción" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introducción
              </span>
            </div>
          </a>
        
        
          <a href="../informationGathering/" title="Recolección de información" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Recolección de información
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.d9aa80ab.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>